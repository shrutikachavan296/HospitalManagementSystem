@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    var username = HttpContextAccessor.HttpContext.Session.GetString("UserName"); 
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - HMS</title>

   
    <link rel="stylesheet" href="~/css/site.css" />

 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />



    <style>
        body {
            background-color: #f5f6fa;
        }

        .sidebar {
            height: 100vh;
            width: 240px;
            position: fixed;
            top: 0;
            left: 0;
            background-color: #0d6efd;
            color: white;
            padding-top: 20px;
        }

            .sidebar a {
                color: white;
                text-decoration: none;
                padding: 12px 20px;
                display: block;
                font-size: 16px;
                border-radius: 8px;
                margin: 3px 10px;
            }

                .sidebar a:hover {
                    background-color: #0b5ed7;
                }

        .content-area {
            margin-left: 250px;
            padding: 30px;
        }


        .card {
            border-radius: 12px;
        }
    </style>
</head>
<body>
    @{
        var role = HttpContextAccessor.HttpContext.Session.GetString("UserRole");
    }
 
   
    <div class="sidebar">
        <h4 class="text-center mb-4">🏥 HMS</h4>

        @if (string.IsNullOrEmpty(role))
        {
        
            <a asp-controller="Account" asp-action="Login"><i class="bi bi-box-arrow-in-right me-2"></i> Login</a>
            <a asp-controller="Home" asp-action="Index"><i class="bi bi-speedometer2 me-2"></i> Dashboard</a>
        }
        else if (role == "Admin")
        {
           
            <a asp-controller="Admin" asp-action="Index"><i class="bi bi-speedometer2 me-2"></i> Admin Dashboard</a>
            <a asp-controller="AdminUsers" asp-action="Index"><i class="bi bi-person-gear me-2"></i> Manage Users</a>

         
            <a asp-controller="Patient" asp-action="Index"><i class="bi bi-people me-2"></i> Patients</a>
            <a asp-controller="Doctor" asp-action="Index"><i class="bi bi-person-badge me-2"></i> Doctors</a>
            <a asp-controller="Appointment" asp-action="Index"><i class="bi bi-calendar-check me-2"></i> Appointments</a>
            <a asp-controller="LabOrder" asp-action="Index"><i class="bi bi-card-checklist me-2"></i> Lab Orders</a>

            <a asp-controller="Account" asp-action="Logout"><i class="bi bi-box-arrow-right me-2"></i> Logout</a>
        }
        else if (role == "Doctor")
        {
           
            <a asp-controller="Appointment" asp-action="Index"><i class="bi bi-calendar-check me-2"></i> My Appointments</a>
            <a asp-controller="Patient" asp-action="Index"><i class="bi bi-people me-2"></i> Patients</a>
            <a asp-controller="Doctor" asp-action="Index"><i class="bi bi-person-badge me-2"></i> Doctors</a>
            <a asp-controller="LabOrder" asp-action="Index"><i class="bi bi-card-checklist me-2"></i> Lab Orders</a>
            <a asp-controller="Account" asp-action="Logout"><i class="bi bi-box-arrow-right me-2"></i> Logout</a>
        }
        else if (role == "LabOrder")
        {
          
            <a asp-controller="LabOrder" asp-action="Index"><i class="bi bi-card-checklist me-2"></i> Lab Orders</a>
            <a asp-controller="Account" asp-action="Logout"><i class="bi bi-box-arrow-right me-2"></i> Logout</a>
        }
        else
        {
           
            <a asp-controller="Doctor" asp-action="Index"><i class="bi bi-person-badge me-2"></i> Doctors</a>
            <a asp-controller="Patient" asp-action="Index"><i class="bi bi-people me-2"></i> Patients</a>
            <a asp-controller="Appointment" asp-action="Index"><i class="bi bi-calendar-check me-2"></i> Appointments</a>
            <a asp-controller="LabOrder" asp-action="Index"><i class="bi bi-card-checklist me-2"></i> Lab Orders</a>
          
        }
    </div>

    <div class="d-flex justify-content-end align-items-center p-2 mb-2 shadow-sm" style="margin-left:250px; background-color:#ffffff; border-radius:8px;">
        @if (!string.IsNullOrEmpty(username))
        {
            <span class="me-3">Hello, <strong>@username</strong>!</span>
            <a asp-controller="Account" asp-action="Logout" class="btn btn-sm btn-outline-primary">Logout</a>
        }
    </div>

   
    <div class="content-area">
        <div class="card shadow-sm p-4">
            @RenderBody()
        </div>
    </div>
 


    <!-- JS Libraries -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation-unobtrusive@4.0.0/dist/jquery.validate.unobtrusive.min.js"></script>

    <!-- Render page-specific scripts -->
    @RenderSection("Scripts", required: false)
</body>
</html>
